```cpp
int timesToInt(const times &t)
{
    int d = t.d, m = t.m, y = t.y;
    int ans = d - 1; //注意这里要减去1，因为是计算和y年m月1日的相隔天数
    while(m)
    {
        --m;
        ans += days[m];
        if (m == 2 && isRun(y)) ans += 1;
    }
    //这里已经计算了和y年1月1日的相隔天数
    ans += 365 * (y - 1971);

    //计算闰年的个数技巧，但是注意因为第y年是不完整的，所以要减去1
    //计算1971年到y - 1年的闰年个数
    //先计算1年到y - 1年的闰年个数，然后减去1年到1970年的闰年个数
    ans += (y - 1) / 4 - 1970 / 4;
    ans -= (y - 1) / 100 - 1970 / 100;
    ans += (y - 1) / 400 - 1970 / 400;
    return ans;
}
```